{
  "unpublishedCollection": {
    "name": "bundle",
    "pageId": "bundle complete",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\trefresh_bundles: () => {\n\t\tget_bundle.run(() => {\n\t\t\tbundle.bundle_dropdowns();\n\t\t\tbundle.bundle_all();\n\t\t}, () => showAlert('Couldnt refresh bundles','warning'))\n\t},\n\tbundle_create_response: () => {\n\t\tbundle_register_sf.run(() => {\n\t\t\tbundle_register.run(() => {bundle.refresh_bundles(); showAlert('Bundle Created', 'success')}, () => showAlert('Couldnt create the Bundle in DB', 'error'))\n\t\t}, () => showAlert('Couldnt create the Bundle in chain'))\t\t\n\t},\n\tbundle_schema_asset_amounts: () => {\n\t\tlet schema_amounts = Register_form.data.RegisterBundle_schemaAmounts.split(\";\");\n\t\tlet length = schema_amounts.length;\n\t\tlet schema_asset_amounts = new Array(length);\t\t\n\t\tfor (let i=0; i<length;i++){\n\t\t\tlet schema_amounts_aux = schema_amounts[i].split(\",\");\n\t\t\tlet amount_length = schema_amounts_aux.length;\n\t\t\tlet schema_asset_amounts_aux = new Array(amount_length);\n\t\t\tfor (let j=0; j<amount_length; j++) {\n\t\t\t\tschema_asset_amounts_aux[j] = parseInt(schema_amounts_aux[j]);\n\t\t\t}\n\t\t\tschema_asset_amounts[i] = schema_asset_amounts_aux;\n\t\t}\t\t\n\t\treturn schema_asset_amounts\n\t},\n\tbundle_schema_asset_ids: () => {\n\t\tlet chain_bundle_asset = Register_form.data.RegisterBundle_schemaAssets.split(\";\");\n\t\tlet length = chain_bundle_asset.length;\n\t\tlet schema_asset_ids = new Array(length);\t\t\n\t\tfor (let i=0; i<length;i++){\n\t\t\tlet schema_asset_aux = chain_bundle_asset[i].split(\",\");\n\t\t\tlet asset_length = schema_asset_aux.length;\n\t\t\tlet schema_asset_ids_aux = new Array(asset_length);\n\t\t\tfor (let j=0; j<asset_length; j++) {\n\t\t\t\tschema_asset_ids_aux[j] = parseInt(schema_asset_aux[j]);\n\t\t\t}\n\t\t\tschema_asset_ids[i] = schema_asset_ids_aux;\n\t\t}\t\t\n\t\treturn schema_asset_ids\n\t},\n\tbundle_schema_class_ids: () => {\n\t\tlet schema_class = Register_form.data.RegisterBundle_schemaClass.split(\",\");\n\t\tlet lenght = schema_class.length;\n\t\tlet schema_class_ids = new Array(lenght);\n\t\t\n\t\tfor (let i=0; i<lenght;i++){\n\t\t\tschema_class_ids[i] = parseInt(schema_class[i]);\n\t\t}\n\t\t\n\t\treturn (schema_class_ids)\n\t},\n\tbundle_all: () => {\n\t\tstoreValue(\"bundle_table\", undefined);\n\t\tstoreValue(\"bundle_table\", get_bundle.data.sf_bundle);\n\t\treturn appsmith.store.bundle_table\n\t},\n\tbundle_by_id: () => {\n\t\tstoreValue(\"bundle_table\", undefined);\n\t\tstoreValue(\"bundle_table\", get_bundle_by_id.data.sf_bundle);\n\t\treturn appsmith.store.bundle_table\n\t},\n\tbundle_by_chain: () => {\n\t\tstoreValue(\"bundle_table\", undefined);\n\t\tstoreValue(\"bundle_table\", get_bundle_by_chain.data.sf_bundle);\n\t\treturn appsmith.store.bundle_table\n\t},\n\tbundle_dropdowns: () => {\n\t\tstoreValue(\"bundles\", undefined);\n\t\tstoreValue(\"bundles\", get_data.getBundles(get_bundle.data.sf_bundle));\n\t\treturn appsmith.store.bundles;\n\t},\n\tsubmit_schema: () => {\n\t\tlet array = [];\n\t\tif (Schema_table.tableData != undefined){\n\t\t\tarray = Schema_table.tableData;\n\t\t}\n\t\tlet new_value = {\n\t\t\t\"class_id\": parseInt(Register_classID.text),\n\t\t\t\"asset_id\": parseInt(Register_assetID.text),\n\t\t\t\"amount\": parseInt(Register_amount.text),\n\t\t}\n\t\tarray.push(new_value);\n\t\tstoreValue(\"schema_table\", undefined);\n\t\tstoreValue(\"schema_table\", array);\n\t},\n\tbundle_schema: () => {\n\t\tlet schema_classes = [];\n\t\tlet schema_assets = [];\n\t\tlet schema_amounts = [];\n\t\tlet length = Schema_table.tableData.length;\t\t\n\t\tfor (let i=0; i < length; i++) {\n\t\t\tif (!schema_classes.includes(Schema_table.tableData[i].class_id)){\n\t\t\t\tschema_classes.push(Schema_table.tableData[i].class_id)\n\t\t\t\tlet assets = [];\n\t\t\t\tlet amounts = [];\n\t\t\t\tfor (let j=0; j < length; j++){\n\t\t\t\t\tif(Schema_table.tableData[j].class_id == Schema_table.tableData[i].class_id){\n\t\t\t\t\t\tassets.push(Schema_table.tableData[j].asset_id);\n\t\t\t\t\t\tamounts.push(Schema_table.tableData[j].amount);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tschema_assets.push(assets);\n\t\t\t\tschema_amounts.push(amounts);\n\t\t\t} \n\t\t}\t\t\n\t\treturn {\n        \"class_ids\": schema_classes,\n        \"asset_ids\": schema_assets,\n        \"amounts\": schema_amounts\n    };\n\t}\n}",
    "variables": []
  },
  "id": "bundle complete_bundle",
  "deleted": false,
  "gitSyncId": "627c2017d3efed3aab4f7775_627c3ccbd3efed3aab4f7837"
}